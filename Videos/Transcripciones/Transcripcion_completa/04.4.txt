04.4-Fourier 1D y frecuencias de audio
https://www.youtube.com/watch?v=gvAL7twl-CU
 para calcular descriptores de audio lo primero que tengo que ver es ver el rango de frecuencias audibles de los humanos que ya vimos el video que el oído sensible entre los 20 years a los 20 kilos hertz pero para entender un poco más eso hay un vídeo bien interesante en youtube que aquí les doy el link que muestra las distintas frecuencias y cómo se secuencian de allí y lo vamos a reducir ahora en este vídeo parte en los 20 hearts y aquí no no se escucha un 80 y así lo voy a basar un poco de los viajes de agua 5000 el agudo bien bueno germanas un humano de conducción 8000 en el interesante hasta donde no puede escucharlo de hecho se suelta hasta el 20 mil por dependiendo la edad para llevar reduciendo el rango así yo conquisté mil de los cuestión este audio que recorre todo el espectro se puede ver interesante verlo hay un software de software libre los amautas y de aquí estaba para disponible para windows mac y linux que permite hacer edición de audio y vamos a ver el audio del vídeo que acabamos de ver aquí está normalizado pero si hacemos un zoom la instala en la onda que genera el que contiene ese audio mirando cómo vamos y aquí lo podemos reproducir también cuando fueran no [Música] y vamos a verlo en el audio y y si avanzamos en el tiempo y cómo empiezan a la onda empieza a y vamos a aumentar el sol y si vamos avanzando se ven como el lado va aumentando su frecuencia y eso significa un sonido más agua [Música] cuando ya se hace con muchas frecuencias de esas veces como un patrón quien podemos verlo más así se puede ver en lo que es el espectro grama diesel espectrograma es el rango de frecuencias mostrados cosas estable tan arriba y abajo está el espectrógrafo para el mismo tiempo aquí es que cambiar un poco esto y nos vamos [Música] analiza la trama 20 y s de cómo va aumentando en el tiempo esto es está el audio completo el concejo se termina en 2020 y lo que estamos ahora muy bien es interesante para entender un poco el sonido él en el para entender ese aspecto grama el aspecto grama lo que hace es un análisis de frecuencias sobre una ventana una pequeña ventana entonces aquí aquí aquí lo primero es que tenemos un audio ese audio le tomamos una pequeña ventana y esta ventana le hacemos un análisis de sus frecuencias y aparece esto estoy en sistema del espectro del espectro son en la energía de las distintas frecuencias dentro de esa ventana y que todas estas estas frecuencias unidas sumadas dan el audio que la ventana donde que estamos analizando este espectro se va acumulando y va apareciendo se acumula en forma vertical para las distintas ventanas traseras propinados ventanas quiero tu espectro y como la como una columna y aquí el espectrograma es la unión de todos los espectros en el tiempo ahora lo que interesa ver aquí es cómo hacemos el primer cómo se genera el espectro para el general espectro es lo que se hace en la transformada de fourier nosotros ya lo vimos antes en el curso transformado muriel para imágenes entonces y bueno para un d para una dimensión lo que se recicló que en la forma de procesar las transformaciones que recibe como entrada una secuencia temporal que son los amplios y aquí vamos a definir que es de tamaño es decir tiene de 'champions' [Música] cada uno de ellos se multiplica por una frecuencia entonces ven aquí lo que vamos a hacer es que el w en la frecuencia y el doble en la frecuencia y vamos usamos la fórmula para calcular el peso de cada una de las frecuencias y que significa w es la frecuencia doble e igual uno es se refiere a la onda que oscila una vez donde sí tenemos de 'champions' subrurales imagen y queremos saber el peso de esta frecuencia en estado cuando dice dobles 2 es la es la onda que su plan suben y bajan prueba una onda y tiene por tanto 22 vacilaciones debe ser donde la igual 2 y así tenemos que ir recorriendo todas las posibles donde da igual 13 etcétera hasta w igual que en principio pero como ya vimos él cuando estos números son reales que es el caso que en el caso empiezan a haber simpatías y en realidad no es necesario analizar hasta dónde igual de la onda y cross y las de veces porque tampoco es posiblemente abrimos cuando hablamos de imágenes que hay que llegar hasta medios y la onda la mayor cantidad veces es la que oscila para tres amplios e intermedios por quién tiene que subir y bajar y tienes de oscilaciones salt en medio oscilaciones es lo que entonces lo que vamos tirando para cada uno de 20 pies la frecuencia bastante y con el promedio de los hombres nos tiramos del doble-doble igual 0 hasta donde igual que medias y aquí vamos a ir obteniendo el peso el peso de cada una de las frecuencias hasta terminas él quiere estar aquí esto de acá es es la representación de cada una de estas reglas y enlace una multiplicación es como tú no está calculando una correlación entre el trozo de audio y la frecuencia conseguidos valor altos porque realmente si aparece los autores son elevados y un imaginario con sistema más sano y por tanto este valor de acá es un número complejo que tiene una parte se aman y volver tiene una parte real y una parte imagina los datos son dos números y a cada uno de estos es el df de w son dos números y que en ese sentido de que entonces se puede solamente tener sentido representar dobles bastante medios y cada uno de estos métodos le alejen entorno bueno entonces entonces pues aquí estuvo una transformada porque finalmente de 'champions' se convierten en coeficientes y no hay perdía información es otra forma de ver el incómodo esta ventana de horas que otra forma de ver él y cuando tenemos como tenemos dos números quiero que se visualiza en el especto graba en el espectro y lo que se visualiza número en realidad hay dos o dos cosas que se pueden ver hay dos medidas una que es la magnitud que tiene que ver con la parte real al cuadrado más la parte imagina al cuadrado raíz cuadrada que es la magnitud de ese número complejo y efectivamente eso lo que se grafica en un espectro entonces para los distintos dólares desde el cero hasta te metes hilos y serafín hacia arriba aquí el ciese que es la energía y usualmente es la ley de magnitud y los que superen la fase la fase general con tangente de imaginaria sobre la parte real de ahí es un ángulo y al menos para la visualización del espectro no se usa sus así para iniciar pero de manu en el espectro no se se muestra más bien la magnitud ver otra transformada es la forma inversa esquí y significa como esto una transformada y en realidad en la ventana x la ventana de valores x se convierte en una ventana de valores asignando 1000 la frecuencia y uno puede invertir lo he dado uno puede modificar la frecuencia fue invertir y volver a obtenerlos los autos de audio cómo se hace eso mediante la transformación inversa que es es casi la misma transformada de fourier es sobre las frecuencias sobre las regiones frecuencias sólo digo lo los valores imaginarios o reales imagina los valores complejos digo de la tan formal furia con la diferencia que cambia un signo y hay un factor de escala entre el aquí dependiendo la librería que uno use es donde pone el signo negativo de lo común es que se ponga en la primera formada forward según sal del signo negativo y en la inversa queda con positivo de iquique el inverso también vale el factor pero a veces se pueden poner en el otro y aquí queda con un mono o incluso superponer los dos equis queda uno en que a raíz de uno partido ante ghana más y que ganamos con un factor de escala en la librería cuál es [Música] ahora ya sabemos cómo calcular las frecuencias entonces es un método numérico ya que la librería más como se llama la de la línea y es el algoritmo de la fas courier transport y hablamos de des algoritmo en el día anterior y que es una forma rápida de calcular es una forma una algoritmos y siete digamos de calcularlo de calcular todo esto estos coeficientes y quien toma tiempo pero que en el tamaño de la mental otro concepto que hay que ver siempre con audios o con seguros de cibeles de los decibeles un decibel es una unidad que mide qué tan grande es un valor comparado con un valor de referencia y por tanto si es quien tenga un valor de referencia a que este digamos 5 valor de referencia entonces tengo un valor que vale es 10 veces más si tengo un valor equivale a 50 es el 50 es siempre sean más que el del 5 y por tanto ser diez veces más grande eso es esto lo que está calculando el logaritmos más series por tanto eso es un bell no podía decirles si esto fuera así según x que es igual a 500 comparado con estos equipos 500 entonces estos serían en 2 vélez porque el organismo en la división de 500 sobre 5 nación y 100 logaritmos en base a 10 el número de senos dos líneas dos ceros por tanto son dos pérez o veinte decibeles y lo decidirá ser interesante todos se usan porque permiten comparar como alguna escala logarítmica permiten comparar diferencias muy grandes entonces es que quien viene tenemos números de 5 millones de 550 millones en 50 millones es comparado con el 5 es 10 millones de veces más grande 10 millones de veces y por tanto esto sería un 7 en los de limón baterías importa todo esto serían 70 este número implicaría sin tensiones es un número tan grande 50 en realidad se reduce a un número manejar ahora eso aplicado el audio y el sonido se mide en sus transiciones para medir la potencia la motivación la intensidad del sonido y eso lo que queremos medir con los decimales [Música] cuánta potencia en el en el sonido pero la forma de medirlo por los sensores es a través de analizar la presión acústica que tiene que ver con el movimiento desde el golpe del aire sobre el sensor y eso serían pascal es ir y aquí hay un game detalle es que la potencia del audio no es directamente proporcional al movimiento si al cuadrado 9 de ahí equivale a ser un factor 2000 entre medio la referencia base es el mínimo audible quienes son 20 micro pascal es que nosotros podemos escuchar desde 20 micro pascales hasta 200 para acá les escales de presión acústica y eso nos da un rango entonces si vemos 200 en 200 ver la cantidad de la diferencia acá el 20 de hecho acá hay el 200 con respecto al 20 del euro más caras del 200 son de 10 millones de veces más grandes entonces todo esto tiraba 6 millones y schwager 20 y 10 más por tanto en estos acá es es 10 millones de veces en el bien los asientos meses más grande y ese es como nuestro rango de escuchar puedo escuchar un sonido muy bajo y un sonido bien millones de veces con mayor poder así como conversiones la potencia proporción al cuadrado es que nos interesa medir la potencia que habrá entre factor 2 y lo elevamos al cuadrado y esto sale multiplicando afuera y queda aquí un 20 lo mismo nos de este rango y entonces para el rango máximo audible que aquí nos va a quedar un bien como estos bienes a 7 en base a 10 más van a quedar entonces estaba consciente por 20 días 140 visibles y en el rango máximo donde empieza el oído empieza a recibir daño sus colores y vélez prestas estos decibeles 500 comentando aquí los decibeles físicos del sonido de la realización en el caso de analizar nuestra forma de julián la energía también elegirá a transformar fourier las magnitudes también tienen este efecto de que se disparan algunos valores y es bueno en el caso de la transformamos un valor de referencia el valor de referencia usar algunos usan algún valor pequeño así 0,0001 [Música] y un valor no tan arbitrario sería usar la magnitud máxima y eso consiste entonces en tomar de las magnitudes de todas las frecuencias tomar la máxima magnitud como valor de referencia- y luego todas las magnitudes son proporcional a la magnitud máxima de entonces este número va a ser siempre menor de esta división va a ser siempre menor a 1 importante los números negativos y ahí es donde aparecen de decibeles negativos por si en algún un gráfico 20 negativos es el valor máximo bien bien cuando uno analiza el audio y el análisis de cannes forma furia no se hace sobre las compresas que se hace sobre ventanas pequeñas de hecho menores un segundo porque cuando no quiere ser el análisis de a donde uno tiene por ejemplo analizar la voz y analizar todas las inflexiones todos para poder procesar una palabra y poder entender una palabra mediante análisis de audio tenemos que poder analizar todos los sonidos y eso significa que tenemos que ir descubriendo todos los fonemas que quien pronuncia uno y en un segundo hay muchos problemas ahí donde está la ventana de análisis de audio usualmente del orden de diez ventanas por segundo o hasta cien ventanas por segundo para tratar de poder analizar cada uno de los sonidos que forman una palabra estos son ventanas pequeñas y muchas ventanas pequeñas y ese va a ser el análisis de frecuencias dentro de ese tamaño usualmente por él debido al algoritmo de la transformada rápida de las cubiertas son es que el algoritmo más eficiente cuando el número de shampoos que uno va a procesar después de ancianos donde es usual y común ver quién los análisis de audio se toman tamaños de ventana de 512 es antes del 24 sabes hasta puesto 198 [Música] 824 en el centro una ventana y eso dependiendo de cuál es la dependiendo de cuál es la el salto el rey del audio es el tamaño de la gente ya bruscamente se mueven por eso por eso rango y entonces a ventanas de tamaño 512 por ejemplo se calcula la transformada de fourier y hay que tener cuidado ahí porque como resultamos calculando de una transformación solo una ventana pequeña de menos de un segundo y aparece por ejemplo si tenemos 40 por segundo una ventana de 20.000 puntos vamos a tener 800 y si ahí entonces si es que en ese audio mediante la transformación descubrimos que la frecuencia 200 tiene una alta energía eso no son 200 gentes cierto porque porque este 200 de aquí son 205 200 ciclos dentro de una ventana de 20 militantes por tanto hay que instalarlo para el el calentará de un segundo y de hecho aquí haciendo las regla de tres simple saben que esto es que estos 200 ciclos en esta ventana de 20 milisegundos y media aquí 20 milisegundos sigan sin 50 ventanas del bus aunque es una ventana que es sin un 50 2 de un segundo y por tanto unas frecuencias 200 dentro de esta ventana es una frecuencia 50 veces más grande en cuanto se mire ciento 200 por 50 allí nos da los no tienen bien y entonces hay que tener atención cuando no procesa ventana que hay que hacer esto de esta escala para prestar bien el análisis por frecuencia y luego tuve que tener cuidado con cuando nadal ese análisis por ventanas es que es la transforma de furia como uno toma una ventana aquí a presentarnos y aparece artificialmente aparecen unas de discontinuidades en el algoritmo de la transformada de fourier y eso hace que aparezcan frecuencias altas donde la gente y eso es un problema porque si que uno está procesando un audio un audio un audio el árbol no lo está procesando porque tienen ventanas y esa ventana usted no tuvo uno quiere hacer por ejemplo tomar un 1 en el espectro y una super y ajuste el espectro y con la transformada de fourier inverso no se devuelven estos estos efectos empiezan a de estos pequeños efectos de altas de alta ya espacial pueden cian aquí de discontinuidades hace que empiecen a aparecer unas frecuencias altas donde no las hay y empiezan a aparecer ruidos ruido y detalles y problemas de de que no se está haciendo bien en el procesamiento de audio y la forma más común de eso es forzar a que sea a que tenga el inicio y fin suave mediante la multiplicación de la ventana de la multiplicación de una ventana de que se llama de windows de aquí lidera que los amplios existe múltiple componente que es que él expresa con la ventaja la fórmula con semejante que hace que la transformada de fourier quiera más suave y se evitan estos problemas de que no coincidan cuando no vas haciendo análisis por ventanas con desplazamientos con no ver la que coinciden todas las pruebas siempre se imparte funciones está la dejan en x se manejan distintas funciones hay que en este libro les recomiendo leer cuál es cuál es la portería ahora antes de entrar aquí vamos a mostrar un pequeño código fuente encima más para poder generar audio cómo se genera el audio el audio como vimos es que un audio es finalmente funciones y no saludables con distintas frecuencias distintas amplitudes y podemos aquí hacer uno existen otros más complejos aquí lo podemos entregar distintas frecuencias y las va a generar aquí lo que va a hacer que para llamar a en el vídeo de cómo poder procesar y reproducir audios crudos audio rock y esta es el 'fair play' vlc y lo que vamos hacer que vamos a generar un archivo crudo rol de los samplers generados por nosotros y luego los vamos a reproducir por ejemplo aquí ej [Música] con géneros de 44.100 de software segundo y que tenga y vamos a ver cómo son o pero interesante es que podemos sumar cosas difíciles y buscar algo de 500 más al borde de 800 a ese tipo o podríamos decir y estos 500 800 no somos unos 1200 x 3 es eso este es solo se está guardando en un archivo llamado el último punto root que entonces podríamos abrirlo con y cómo hacer un archivo robben audacity quiere decir que importar [Música] [Música] y esta es la esta es la onda que fue generada y podemos ver las tres líneas de las tres porque comento esto porque para motivar que el audio no puede generar audio no puede hacer sonidos claro sonido natural es mucho más difícil pero si no puedes hacer alguna sonido en forma artificial