 en este vídeo vamos a hablar sobre cómo calcular histogramas en una imagen primero vamos a decir que los colores los espacios colores y vienen en dos grandes grupos los que son aditivos y los que son sus activos en imágenes principalmente aditivos que se refieren por eso los han imagen los que somos un aditivo se refiere a que cuando no hay nada no hay ningún color esto es negro y que las longitudes de onda se modeló como que se van sumando entre sí que lo natural del modelo de cómo funciona en el ojo hay que hacer esta diferencia con los espacios de color tipo sus activos que modelan las pinturas es decir aquí cuando no hay no hay color es blanco como una hoja blanca y que los colores lo que van haciendo es tapar y evitar que se refleje colores el x ver que en el modelo aditivo los colores primarios son el jebe [Música] y que cuando se van sumando van apareciendo en las combinaciones de color entonces este de aquí es el salesiano es el mahé el amarillo es el problema de imágenes internet y que la suma de todos ser marginal es cierto nos da el color del color blanco 3 aquí en notar que en el modelo sufre activo cuando no hay nada cuando hay 0 0 es blanco y que cuando abres un color este ejercían el que es un color primario en esto este es el magenta y este es el amarillo smcm y maestro y en los cartuchos de tinta de una impresora también para generar el negro directamente y no gastando tres cartuchos que aparece en ccm y acá el típico los cartuchos de una impresora y no estar como el el 100 y el color secundario como combinación x color primario el amarillo que aquí es una combinación esto aquí es el cono primario porque porque aquí sucede que se va arrestando y cuando se resta en este con este lucían con el amarillo valores el verde en esta relación entonces de primaria con secundario de un moderno del otro modelo bueno en realidad siendo realista este modelo bien realizado en la práctica no es tan así pero sirve para entender que unos colores los estantes en realidad decir no solamente que nos interesa los modelos aditivos en imágenes que lo común para desplegar colores en la pantalla y que vamos a partir con el modelo en relieve que el más natural dado quien nuestro ojo nosotros somos efectivamente entonces en una imagen en el modelo más tradicional consiste en generar una imagen tiene tres canales el inicio son tres imágenes juntas una imagen en tonos de grises representando la cantidad de rojo la cantidad de rojo la cantidad de verde y la cantidad de azul son tres imágenes en gris que sumadas nos da y nos dan los colores y entonces por ejemplo en este caso aquí si decimos que el rojo está a plano a media intensidad y que aquí hay cero de verde y aquí hay mucho verde ya que acá abajo hay cero de azul y arriba de que está full azul al combinar estos tres colores en una única imagen de tres canales como en esta zona acá de la esquina inferior izquierda él está en cero el verde y el azul y por tanto se va a ver un rojo de medio tono donde estén los tres en esta zona aquí están los tres al mismo tono por tanto aquí se va a ver ese gris y pondría y para aquí de aquí es de color vaca este valor de acá es la combinación de un mucho azul mucho verde y poco rojo es el color de aquí se ven las distintas combinaciones de algunas posibles combinaciones siguiendo estos 33 patrones de regiones 10 sobre nada como calculamos un descriptor de una imagen que empiece volviendo a que la imagen anterior podríamos decir que si el si esto de acá es la imagen que se forman como tres imágenes de color gris que nosotros sabemos ya calcular historia negra que está si calculamos en mis programas de gris de cada uno de estos canales y el por tanto el histograma de la imagen total es la combinación de las tres historias supongamos que estos son sin imágenes de 8 bits debido a que tendría 256 bits y la concretización de 21 de los 23 veces importante nos dará más de 700 y algo del pgn y efectivamente es una forma de calcular victoria más que el colista drum independiente por canal ya sólo que está representado acá no tiene para que ser 256 bits entonces voy a hacer no sé 32 bien 32 mil 72 ahora eso eso nos sirve para representar los colores de la imagen pero de un mal descriptor vamos a donde esto no permite buscar colores parecidos porque efectivamente no estamos representando los colores el que tenga mucho d de rojo muy oscuro no nos dice que haya cosas oscuras y que aquí tenga el pic en azul y nos dice que en la imagen hay en azul sobre quién va a depender de en esos píxeles donde haya mucho azul puede ir a la relación de los otros colores podría haber sido unos grises si es que podría haber sido cualquier otro no depende de los otros canales entonces no nos sirve para buscar una imagen con colores parecidos no entonces nada nuevo para servirnos pero si en todo caso hay que decir que si sirve para buscar e imagina duplicadas el histograma por color y tengo una imagen y quiero ver buscar dónde está esa misma imagen pero considerando los colores efectivamente es mejor usar al menos algún histograma de los grises de la imagen es mejor usar usar de los tres esto era más concatenadas nos va a permitir buscar imágenes duplicadas así que eso hay que mencionar pero no nos permite representar y buscar colores parecidos pero buscar colores parecidos y calixto grava y representar los colores primero tenemos que hablar del primer el color de espacio porque vamos a ver que el manu toral que en el hereje ve y que tiene algunas propiedades buenas porque se forman mediante este cubo que un cubo regular cierto y que cada eje se mide en forma independiente de los tres colores entonces cada pixel ya está dado por tres números independientes que cada uno varía de 0 a 2 55 a 608.000 o si es que lo queremos como un continuo va de 0 a 1 de nada al máximo y esencialmente que lo llamamos calcular histograma es que este espacio de acá lo dividimos cada eje en forma independiente y calculamos especies de cubitos contadores y cada uno de los píxeles de una imagen tenemos que ver a qué ámbito va a corresponder hay que hacer esta división porque si es que no hacemos ninguna división y es lo que quiero contar exactamente el color que tiene la imagen eso es mucho acertado porque es toda la 8 por toda la 8 córdoba la 8 24 a 16 millas aproximadamente y un hito naval de 16 millones no tiene sentido por tanto lo que no hace es que no hace unas pequeñas divisiones e iba calculando el histograma de - vince algo por ejemplo si lo dividimos en tres tonos decimos en tres regiones tres porteros por tiempo calcular histograma de indignación 27 eso es bastante cierto dividido en dos cada uno y entonces cada poquito van a quedar 27 cubitos bastante grandes y eso nos va a permitir todo caso contar los colores de cualquier imagen y cómo lo hacemos bien una imagen tomamos las tres coordenadas de cada pixel y tenemos que saber cuál a quien bien corresponde dado estos tres nombres como lo hacemos tenemos que mirar en cada eje en que en qué cordera le corresponde [Música] bueno aquí un detalle en el que las imágenes depende mucho de la luz natural y que en la naturaleza maría se van a ver todos los tonos amarillos una forma indirecta y bien simples de normalizar el color de la luz consiste en asumir que en una foto vienen de los tres colores y que el máximo de cada canal va a corresponder al blanco entonces si es que uno de algún medio amarillo es porque va a tener va a tener muy poco azul y va a tener mucho del rojo y el verde no toma el máximo del rojo el máximo del verde es el blanco y archibald su blog se normalice cada uno de los píxeles y esencialmente consiste en dividir cada pixel en forma independiente con el máximo de sesión el wave patxi es muy simple y a veces no funciona bien pero si quieren ver más cosas suelen normalizar colores aquí les dejo dos películas que hablan sobre son sobre esto ahora para dividir los tres colores vemos que aquí hay una división por ejemplo la divisa típica vendría a ser vivir acerca de cada canal y leer recibido seis el ginseng el ven 6 y aparece en estos 216 cada uno de los mil representa estos rangos de en cada canal y aquí esquemáticamente aquí se ve como estamos dividiendo el cubo región en estos 216 opciones en forma plana se podrían ver aquí no está aquí porque sé y por qué no 7 y porque 15 es porque con 6 nos queda un número menor o igual a 256 que entonces cada uno de estos vince se puede inyectar por un bit nos abre un bético entonces hay una opción bastante común cuando uno quiere reducir de tres canales a un solo canal pero con colores indexados y uno aquí le da un número cero y éste vendría a ser el color 215 y de 215 y cada pixel ahora en la imagen es de un solo color no salimos de un solo canal y él y el número aquí el número del píxel es el y de cuál de los 216 colores es una forma fácil de convertir como de votar tres canales a un solo canal y luego los histogramas ahora hacer un conteo de caídas esto tiene que precisaban los colores websafe que más históricos actualmente no aplica mucho pero es curioso ver lo que digamos que la paleta de colores watch y que cuando se dividen en rangos aparecen no sé si los vicios es esa es muy común que aparezcan 00 33 cc eso tiene que ver con esta división estación todos los 16 colores hay algunos que extienden y que prefieren a las zonas de grises como nos quedan 40 colores disponibles dan mucha más resolución aeropistas y bueno ahí hay distintas paletas de personas paletas de colores tantos otros más que las paletas de colores nos va a interesar entonces como podíamos calcular y éstos eran más grandes de ahí fue una de hacer esta división pero a veces puede ser quien nos quiera una división muy gruesa 2000 42 dice que el primer cubo de parte bueno pero va a ser en el ere de 0 a 42 en el g de 0 a 42 y en el b de 0 42 todo cualquier pixel qi cumple estas tres condiciones va a sumar al primer bien y por tanto es esencialmente estamos diciendo que el color 0,00 es el mismo que el color 42,42 como a 42 que es el mismo que el 42 0,0 todos los colores van a sumar al mismo bien a veces eso no es correcto a veces es suficiente pero cuando uno está haciendo [Música] cosas más finas con los colores por ejemplo quieren buscar imágenes parecidas de muchos tonos de césped del pasto y los tonos de verdes son relevantes y aquí en realidad voy a ser los tonos de verde se dividen en forma un poco gruesa a veces más suficiencia y ahí es donde uno quiere hacer divisiones más finas del espacio pero el dividir en forma más final es difícil de argumentar porque tenemos que dividir rgb en forma igualitaria entonces si es que yo quiero hacer divisiones de 10 10 en realidad los rangos se van a reducir la cierva 25-26 y van a quedar en mil links bueno aquí si queremos vivir con 32 tramos para rango más finos en realidad quedan 32 mil bits y todo ese problema sucede porque estamos haciendo divisiones tenemos que vivir los tres canales al mismo tiempo en cualquier división entonces cualquier ficción que necesitamos que le valgo e eso es un problema y un problema de la región porque no nos gustaría hacer divisiones dividir más pero no no saltar como rq ya que se hace muy grande y para hacer eso para tratar de hacer unas divisiones del histograma un poco menos regular en la región es que hay que cambiar la forma de representar el color y una forma muy usada y muy simple consiste en tratar de hacer una conversión del color donde el vamos a hacer una especie de cambio coordenada donde vamos a tomar en este triángulo principal para este eje b y vamos a tomar estas tres vértices vamos a generar este plano y vamos a usar el tono gris se trata porque este va a ser un riesgo y aquí vamos a tener un aspecto de todos los colores de ampliamente el cubo rgb pero que lo estamos cortando por este después de triángulo diagonal y vamos a hacer una especie de coordenadas por ahí en principio este cubo de aquí requiere la región y aquí está el blanco y el negro y este el triángulo que les mencionaba que aquí se ve y efectivamente este triángulo ve el espectro completo de los colores a un tono medio interesante ese triángulo y si subimos en el eje vertical se ve el mismo triángulo más chico los mismos colores pero más claros y si bajábamos aquí se vería del mismo triángulo pero con los colores más oscuros hasta ahora estamos haciendo solamente un cambio coordenadas no hay un cambio del espacio color el mismo espacio color solamente que queremos tratar de ver hacer una especie de cambio de coordenadas polares donde necesitamos un punto referencia y luego vamos a generar un ángulo cualquier color este valor de acá por ejemplo se va a representar como un ángulo una vez un ángulo una distancia del centro y de una una una coordenada tiene el eje vertical que está claro que tan oscuro del color y dentro del triángulo y en qué posición mis días con respecto a un eje base y que ese para hacer un respecto al centro este lugar aquí si hacemos otro cárdenas tienes un problema con respecto al rango de los colores el rango de la saturación cuando nos alejamos del centro esta saturación puede ser distinta dependiendo del ángulo cierto si es que un ángulo 0 tiene todo ese rango veces que esté el ángulo del como 45 grados el rango de la saturación es menor ya que tal si simplificamos esto de formamos el cubo para que sea regular y vamos a tomar como referencia el color rojo y por tanto ahora no tenemos triángulo ahora tenemos dos círculos es como que convertimos el cubo en conos dos conos este es el rojo el primer eje es el h yo bueno dice es bien interesante efectivamente este esa dimensión h es bien interesante porque tenemos todo el rango de colores y decimos por qué color queremos movernos entonces si decimos este ángulo acá vamos a ir queremos poner el tono de los verdes que nos diría está en el ángulo no sea 185 grados y luego de ahí decimos que es tan verde que lo que sea si queremos saturación cero y mucha saturación saturación 1 y decimos quiero full saturación y además decimos que tan claro que tan oscuro queremos el disco ya este aspecto que le estoy comentando casillas h 6 o hd cl el yunque es el tono saturación y que hacer esta diferencia con respecto al gris y l quién me llaman intensidad o no misma ciudad existe un espacio que siempre se entiende y que únicamente él aquí lo voy a mostrar en windows desde el paint aquí tiene el color el color piquer se llaman para seleccionar colores en windows y vean cómo aquí está el espacio regiones de cualquier color se mueve en el espacio de javier y aquí al lado muestra el hs l curiosamente el rango en que los muestran los colores es 0 a 240 porque no tiene gracia windows y él así que él se representa por hsm vean aquí es curioso cómo se mueve de esto es un problema de esta coordenada es circular como bien vemos en la figura del menisco esto circular entonces el 0 este rojo porque tuvimos que definir al mundo algún eje base de la vuelta sobre todo el espectro y termina en el rojo y eso hay que tener ojo con esto porque en la coordenada 239 entonces es muy parecida a la cortina de acero es esencialmente el mismo color por ciento circular esto un problema entonces de este espacio dónde la vuelta completa en la piedra coordenada que es el h si lo movemos de 0 a 1 a 1 digamos el 1 es el mismo 0 y el 0 99 es muy parecido el 0 1 así que la función de distancia y deja un poco más difícil pero lo que sí es muy interesante este disco porque representamos a todos los colores excepto el blanco del negro y el blanco y negro se define por las coordenadas cuando de formamos este triángulo un círculo y cambiamos el espacio ahora estamos revisando los colores en forma distintos el de la coordenada h que les digo es lo que es usar ese disco como base y luego hay otras dos coordenadas que son hay que tenerlas pero la primera están todos de acuerdo aquí en la piedad border es muy importante y en la que hay que poner como las otras dos coordenadas es distintos ya que hay dos grandes divisiones la que les acabo de comentar que se llama h clh 6 incluso algunas partes como hs esencialmente dice si es que estamos hablando del disco superior de siempre decimos luminosidad máxima va a ser siempre blanco da lo mismo la saturación o el blanco pero hay otra forma interpretar esto que dicen que no pueden ser si es que tiene saturación entonces tienen que tener un color y por tanto esa forma de verlo diga con quién es más importante aquí la persona no se han puesto de acuerdo y serían el hsv saturación y valor y que cuando algo tiene saturación tiene color y la única forma que se hablan con negras que tenga esa duración ser así volvemos al disco anterior es como ver esto que escogemos las la luminosidad pero sí que la saturación se mueve en este eje y forzosamente para que sea blanco negro la saturación tiene que ser ser es otra forma de verlo y ahí es donde se diferencia en el h con el s con el l yo diría que edin de cuál de ellos dos gustar el sentimiento da lo mismo porque uno usa estos pasos de colores porque uno le interesa la coordenada h la coordenada del matiz o de los deltonos donde en un solo número podemos representar el color puro hacer notar que es la conversión de rgb a hs es súper simple porque sencillamente una conversión geométrica aquí está el código la explicación de cómo se convierte uno en el otro que son algunas operaciones matemáticas de hecho no lo voy a incrementar y entiendo lo que está haciendo y con esto es esencialmente el mismo espacio rgb porque el de remitir eso que porque la región es y tiene algún problema le sirve para representar los colores el hcm o el achelense tiene el mismo problema ya ese problema tiene que ver con que en este espacio colombia como él el espacio dado para el verde es el mismo espacio dado para el azul y el mismo espacio dado para los rojos porque porque el el r&b es bien igualitario en como representa r confía con b pero en nuestro ojo como vimos el sistema cuando hablamos sobre el sistema visual nosotros somos muchísimo más en cine al verde y no corresponde no esté correcto en el sentido perceptual del ojo del ser humano darle el mismo rango de la misma el mismo rango de tonos al verde que nosotros somos muy poco sensibles al azul y mucho más sensibles al ver pero en este espectro en las distancias entre los colores es igual [Música] digamos eso es la parte fea de la ciencia pero la parte buena es que cuando tenemos coordenadas hsv ahora podemos hacer divisiones y no tienen por qué hacer equipos ya no tienen por qué hacer del mismo tamaño de las tres coordenadas usualmente lo que se estila es que la coordenada h le damos una buena resolución por lo menos 16 para representar todo esto este rango y pero luego las otras coordenadas que tienen que ver con la saturación cierto esto de aquí vengan con la saturación y con la luminosidad o el valor que tiene que ver con quién está claro un oscuro es el disco podemos darle menos rango es de hecho algunos dicen 16 11 por uno por uno y le da lo mismo le dictan solamente un programa en este disco qué mejor idea de por qué hay que representar el blanco y el negro así que algunos dicen 16 por 2 por 2 y eso ya funcionan bastante bien y lo más común es decir 16 44 256 bits y que representa se ve entonces cómo se representa de los 256 bits acelerar más espacio para representar colores colores pues y menos espacio para las variantes en sus colores en general esto es este histograma es bastante mejor que en lo que tiene que ver con los 216 del r&b ojos así como el color h con la distancia con la que aquí se ven algunos programas para esta misma imagen como cultura men grises para la misma para la misma imagen el histograma en por canal por canal el histograma energy de 3 x 3 x 3 27 pins que aquí están los 27 pies para esta imagen y es lo mismo pero con 32 bits desde representados así como aquí en la la en el s tiene 22 direcciones y en él en el corte y los colores y otras formas de representar los colores tienen que ver con con calcular histogramas de el número de máscaras que aparece cada color de estos durante el mejor acción podemos tratar de representar qué tan concentrado hasta los colores de una imagen sea que están muy dispersos o si es que están muy concentrados cómo podemos hacer eso vamos a pasar una máscara y vamos a calcular un visto grama un programa por color pero en vez de contar los píxeles que tiene cada imagen vamos a contar en cuántas más caras aparecen temas y está más cara porque esta máscara se va desplazando en 1 vertical de horizontal en esta ley de encuentro y lo que vamos a hacer es contar para cada color en cuantas ventanas aparece ese color si es que el color está concentrado en una zona de la imagen que tenemos y aquí tenemos una zona que es de cierto color las ventanas que van a contener a este color van a ser pocas no solamente las ventanas que estén en estas zonas van a contar parece pero en cambio si tenemos un una imagen donde el mismo color pues de la misma cantidad de píxeles pero está uniformemente distribuidos la cantidad de máscaras en que está ese color va a ser mucho mayor y por tanto podemos tratar de representar que están concentrados distribuyendo a un color contando cuántas máscaras contienen y sí que la imagen es muy grande podemos calcular más cara más semana ser ajeno porque ya tengo no sería mal color estructura la verdad que es bueno pero es curioso de bueno saber que uno podría hacer esto hasta ahora cómo se puede calcular histogramas y como el histograma hsb rgb pero quiero ver cómo puedo comparar esos programas porque podemos hacer algo mucho mejor que calcular distancias duplican y cómo representar mejor los colores de japón este problema de violencia que el rg ven no da el mismo espacio del verde quedan los otros con la probabilidad el mismo espacio al dvd recogía con bien aún cuando nuestro ojo somos más ansiedad del problema